<!DOCTYPE html>
<html>
<head>
<title>{{ t.title }}</title>

<style>

body{
    font-family: Arial;
    margin:0;
    text-align:center;
    background:url("/static/test.png");
    background-size:cover;
    color:white;
}

.header{
    background:#2e7d32;
    padding:15px;
    font-size:22px;
    font-weight:bold;
}

.card{
    background:rgba(0,0,0,0.8);
    width:340px;
    margin:40px auto;
    padding:25px;
    border-radius:12px;
}

input{
    width:95%;
    padding:9px;
    margin:6px;
    border-radius:6px;
    border:none;
}

button{
    padding:8px 12px;
    margin:5px;
    border-radius:6px;
    border:none;
    cursor:pointer;
}

.voice{ background:#ff9800; color:white; }
.analyze{ background:#4caf50; color:white; }
.history{ background:#2196f3; color:white; }

</style>
</head>

<body>

<div class="header">{{ t.title }}</div>

<br>
<a href="/?lang=en">English</a> |
<a href="/?lang=ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</a>

<div class="card">

<form action="/analyze?lang={{ lang }}" method="post">

<input id="ph" name="ph" placeholder="{{ t.ph }}">
<input id="moisture" name="moisture" placeholder="{{ t.moisture }}">
<input id="n" name="n" placeholder="{{ t.n }}">
<input id="p" name="p" placeholder="{{ t.p }}">
<input id="k" name="k" placeholder="{{ t.k }}">

<br>

<button type="button" class="voice" onclick="startVoice()">üé§ {{ t.voice }}</button>
<button type="submit" class="analyze">{{ t.analyze }}</button>

<a href="/history">
<button type="button" class="history">{{ t.history }}</button>
</a>

</form>

<br>
<p>Scan QR</p>
<img src="/static/URL QR Code.png" width="120">

</div>


<script>
function startVoice(){
    const SpeechRecognition =
        window.SpeechRecognition || window.webkitSpeechRecognition;

    const recognition = new SpeechRecognition();
    recognition.start();

    recognition.onresult = function(event){
        let parts = event.results[0][0].transcript.split(" ");
        if(parts.length>=5){
            ph.value=parts[0];
            moisture.value=parts[1];
            n.value=parts[2];
            p.value=parts[3];
            k.value=parts[4];
        }
    }
}
</script>

</body>
</html>
