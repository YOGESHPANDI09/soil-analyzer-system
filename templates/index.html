<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ t.title }}</title>

    <style>

        body{
            font-family: Arial;
            text-align:center;
            color:white;

            background:url("/static/test.png");
            background-size:cover;
            background-position:center;
            background-repeat: no-repeat;
        }

        .card{
            background:rgba(0,0,0,0.75);
            padding:25px;
            width:340px;
            margin:auto;
            margin-top:60px;
            border-radius:15px;
        }

        input{
            width:90%;
            padding:8px;
            margin:6px;
            border-radius:8px;
            border:none;
        }

        button{
            padding:8px 14px;
            margin:5px;
            border-radius:8px;
            border:none;
            cursor:pointer;
        }

        .voice{
            background:#ff9800;
            color:white;
        }

        .analyze{
            background:#4caf50;
            color:white;
        }

        .history{
            background:#2196f3;
            color:white;
        }

    </style>
</head>


<body>

<h2 style="color:white; margin-top:20px;">
    ðŸŒ± Soil Analyzer System
</h2>


<div class="card">

<form action="/analyze?lang={{ lang }}" method="post">

    <input id="ph" name="ph" placeholder="{{ t.ph }}" required><br>

    <input id="moisture" name="moisture" placeholder="{{ t.moisture }}" required><br>

    <input id="n" name="n" placeholder="{{ t.n }}" required><br>

    <input id="p" name="p" placeholder="{{ t.p }}" required><br>

    <input id="k" name="k" placeholder="{{ t.k }}" required><br>

    <button class="voice" type="button" onclick="startVoice()">ðŸŽ¤ Voice</button>

    <button class="analyze" type="submit">{{ t.analyze }}</button>

</form>

<br>

<a href="/history?lang={{ lang }}">
    <button class="history">{{ t.history }}</button>
</a>

<br><br>

<p>ðŸ“± Scan to open on mobile</p>
<img src="/static/URL QR CODE.png" width="130">

</div>



<!-- ============================= -->
<!-- ðŸ”¥ VOICE INPUT SCRIPT -->
<!-- ============================= -->
<script>
function startVoice(){

    const SpeechRecognition =
        window.SpeechRecognition || window.webkitSpeechRecognition;

    const recognition = new SpeechRecognition();

    recognition.lang = "en-US";
    recognition.start();

    recognition.onresult = function(event){

        let text = event.results[0][0].transcript;

        console.log(text);

        // extract numbers
        let nums = text.match(/[0-9.]+/g);

        if(!nums){
            alert("Speak numbers like: 6.5 40 60 45 50");
            return;
        }

        if(nums.length >= 5){
            document.getElementById("ph").value = nums[0];
            document.getElementById("moisture").value = nums[1];
            document.getElementById("n").value = nums[2];
            document.getElementById("p").value = nums[3];
            document.getElementById("k").value = nums[4];
        }
    }
}
</script>


</body>
</html>
